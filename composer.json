{
  "name": "dpc-sdp/governor",
  "description": "Drupal 8 site for Governor of Victoria",
  "license": "proprietary",
  "require": {
    "acquia/lightning": "^2.2",
    "ckeditor/fakeobjects": "^4.5",
    "ckeditor/iframe": "^4.5",
    "composer/installers": "^1.2.0",
    "cweagans/composer-patches": "^1.6.0",
    "dpc-sdp/drupal-twitter-feed": "dev-develop",
    "drupal-composer/drupal-scaffold": "^2.3",
    "drupal/admin_toolbar": "^1.20",
    "drupal/allowed_formats": "^1.1",
    "drupal/better_exposed_filters": "^3.0@alpha",
    "drupal/ckeditor_iframe": "^2.0@beta",
    "drupal/clamav": "^1.0",
    "drupal/cloudflare": "^1.0@alpha",
    "drupal/cloudfront_purger": "^1.1",
    "drupal/coffee": "^1.0@beta",
    "drupal/components": "^1.0",
    "drupal/config_split": "^1.3",
    "drupal/config_update": "^1.4",
    "drupal/core": "^8.4",
    "drupal/current_page_crumb": "^1.2",
    "drupal/default_content": "^1.0",
    "drupal/devel": "^1.2",
    "drupal/editor_advanced_link": "^1.4",
    "drupal/empty_page": "^1.1",
    "drupal/environment_indicator": "^3.2",
    "drupal/events_log_track": "^1.1",
    "drupal/extlink": "^1.0",
    "drupal/facets": "^1.0@alpha",
    "drupal/fakeobjects": "^1.0",
    "drupal/fast_404": "dev-1.x",
    "drupal/google_analytics": "^2.2",
    "drupal/hotjar": "^1.2",
    "drupal/linkit": "^4.3",
    "drupal/m4032404": "^1.0@alpha",
    "drupal/maxlength": "^1.0@beta",
    "drupal/media_entity_audio": "^2.0@alpha",
    "drupal/menu_block": "^1.4",
    "drupal/menu_breadcrumb": "^1.5",
    "drupal/override_node_options": "^2.3",
    "drupal/paragraphs": "^1.2",
    "drupal/purge": "^3.0@beta",
    "drupal/purge_queuer_url": "^1.0@RC",
    "drupal/redirect": "^1.0@beta",
    "drupal/redis": "^1.0@RC",
    "drupal/seckit": "^1.0@alpha",
    "drupal/shield": "^1.1",
    "drupal/simple_sitemap": "^2.11",
    "drupal/sitemap": "^1.3",
    "drupal/social_media": "^1.2",
    "drupal/stage_file_proxy": "^1.0@alpha",
    "drupal/styleguide": "^1.0@alpha",
    "drupal/token_conditions": "dev-1.x",
    "drupal/token_filter": "^1.0@beta",
    "drupal/twig_field_value": "^1.1",
    "drupal/views_menu_children_filter": "^1.0@beta",
    "drupal/viewsreference": "^2.0",
    "drupal/webform": "^5.0@beta",
    "drupal/wysiwyg_template": "^2.0@beta",
    "drush/drush": "^8.1",
    "library/dropzone": "^4.3",
    "webflo/drupal-finder": "^1.1",
    "webmozart/path-util": "^2.3"
  },
  "require-dev": {
    "behat/behat": "3.3.1",
    "behat/gherkin": "4.4.5",
    "dealerdirect/phpcodesniffer-composer-installer": "^0.4.3",
    "drupal/coder": "^8.2",
    "drupal/console": "^1.0",
    "drupal/drupal-extension": "~3.3.0",
    "integratedexperts/behat-format-progress-fail": "^0.2.1",
    "integratedexperts/behat-relativity": "^0.3",
    "integratedexperts/behat-screenshot": "^0.6.1",
    "phpunit/phpunit": "^5.7.19",
    "symfony/filesystem": "^3.2.8"
  },
  "minimum-stability": "alpha",
  "prefer-stable": true,
  "autoload": {
    "classmap": [
      "scripts/composer/"
    ]
  },
  "autoload-dev": {
    "classmap": [
      "tests/unit/"
    ]
  },
  "config": {
    "platform": {
      "php": "7.1"
    },
    "process-timeout": 0,
    "sort-packages": true
  },
  "conflict": {
    "drupal/core": "7.*"
  },
  "repositories": {
    "drupal": {
      "type": "composer",
      "url": "https://packages.drupal.org/8"
    },
    "asset-packagist": {
      "type": "composer",
      "url": "https://asset-packagist.org"
    },
    "behat-step-time-logger": {
      "type": "git",
      "url": "https://github.com/tavlima/behat-step-time-logger"
    },
    "library/dropzone": {
      "type": "package",
      "package": {
        "name": "library/dropzone",
        "version": "4.3.0",
        "type": "drupal-library",
        "dist": {
          "url": "https://github.com/enyo/dropzone/archive/v4.3.0.zip",
          "type": "zip"
        }
      }
    },
    "package/ckeditor-templates": {
      "type": "package",
      "package": {
        "name": "ckeditor/templates",
        "type": "drupal-library",
        "version": "4.5.7",
        "dist": {
          "type": "zip",
          "url": "https://download.ckeditor.com/templates/releases/templates_4.5.7.zip",
          "reference": "master"
        }
      }
    },
    "package/ckeditor-iframe": {
      "type": "package",
      "package": {
        "name": "ckeditor/iframe",
        "type": "drupal-library",
        "version": "4.5.11",
        "dist": {
          "type": "zip",
          "url": "https://download.ckeditor.com/iframe/releases/iframe_4.5.11.zip",
          "reference": "master"
        },
        "require": {
          "composer/installers": "~1.0"
        }
      }
    },
    "package/ckeditor-fakeobjects": {
      "type": "package",
      "package": {
        "name": "ckeditor/fakeobjects",
        "type": "drupal-library",
        "version": "4.5.11",
        "dist": {
          "type": "zip",
          "url": "https://download.ckeditor.com/fakeobjects/releases/fakeobjects_4.5.11.zip",
          "reference": "master"
        },
        "require": {
          "composer/installers": "~1.0"
        }
      }
    },
    "dpc-sdp/drupal-twitter-feed": {
      "type": "git",
      "url": "https://github.com/dpc-sdp/drupal-twitter-feed"
    }
  },
  "scripts": {
    "up": "docker-compose up -d --build",
    "restart": "docker-compose restart",
    "down": "docker-compose stop",
    "destroy": "docker-compose down",
    "build": [
      "docker-compose up -d --build",
      "@composer install -n --ansi --prefer-dist",
      "@fed-build",
      "@db-import"
    ],
    "fed-build": [
      "npm install",
      "npm run build"
    ],
    "cli": "docker exec -i $(docker-compose ps -q cli)",
    "pull": "docker image ls --format \"{{.Repository}}:{{.Tag}}\" | grep amazeeio | grep -v none | xargs -n1 docker pull | cat",
    "debug-drush": "docker exec -i $(docker-compose ps -q cli) /app/scripts/xdebug.sh /app/vendor/bin/drush -r /app/docroot",
    "site-install": [
      "@composer cli -- drush tide-install -r /app/docroot -y",
      "@composer cli -- drush cim -r /app/docroot -y",
      "@composer cli -- drush cr -r /app/docroot -y"
    ],
    "cr": [
      "@composer cli -- drush cr -r /app/docroot"
    ],
    "db-import": "@composer cli -- ./scripts/rebuild-env.sh",
    "cs": [
      "phpcs --colors",
      "npm run lint"
    ],
    "test": "@composer cli -- vendor/bin/behat --format=progress_fail --colors --tags ci",
    "test-wip": "@composer cli -- vendor/bin/behat --format=progress_fail --colors --tags wip",
    "login": [
      "@composer cli -- drush uublk admin",
      "@composer cli -- drush uli -r /app/docroot -l http://governor.docker.amazee.io/ | xargs open"
    ],
    "logs": "docker-compose logs",
    "docker-prune": "docker system prune -af",
    "rebuild": [
      "@cleanup",
      "@build"
    ],
    "cleanup": [
      "rm -Rf vendor",
      "rm -Rf node_modules",
      "chmod -Rf 777 docroot/sites/default",
      "git ls-files --directory --other -i --exclude-from=.gitignore docroot|xargs rm -Rf"
    ],
    "doctor": "./scripts/doctor.sh",
    "drupal-scaffold": "DrupalComposer\\DrupalScaffold\\Plugin::scaffold",
    "pre-install-cmd": [
      "DrupalProject\\composer\\ScriptHandler::checkComposerVersion"
    ],
    "pre-update-cmd": [
      "DrupalProject\\composer\\ScriptHandler::checkComposerVersion"
    ],
    "post-install-cmd": [
      "DrupalProject\\composer\\ScriptHandler::createRequiredFiles"
    ],
    "post-update-cmd": [
      "DrupalProject\\composer\\ScriptHandler::createRequiredFiles"
    ]
  },
  "extra": {
    "drupal-scaffold": {
      "source": "http://cgit.drupalcode.org/drupal/plain/{path}?h={version}",
      "includes": [
        ".editorconfig",
        ".eslintignore",
        ".gitattributes",
        ".htaccess",
        "index.php",
        "robots.txt",
        "update.php"
      ],
      "omit-defaults": true
    },
    "enable-patching": true,
    "composer-exit-on-patch-failure": true,
    "installer-paths": {
      "docroot/core": [
        "type:drupal-core"
      ],
      "docroot/modules/contrib/{$name}": [
        "type:drupal-module"
      ],
      "docroot/themes/contrib/{$name}": [
        "type:drupal-theme"
      ],
      "docroot/profiles/contrib/{$name}": [
        "type:drupal-profile"
      ],
      "docroot/libraries/{$name}": [
        "type:drupal-library"
      ],
      "drush/contrib/{$name}": [
        "type:drupal-drush"
      ]
    },
    "preserve-paths": [
      "docroot/modules/custom",
      "docroot/themes/custom",
      "docroot/drush",
      "docroot/sites/default/settings.php",
      "docroot/sites/default/default.settings.local.php",
      "docroot/sites/default/files"
    ],
    "patches": {
      "drupal/better_exposed_filters": {
        "Add core/drupal as dependency to better_exposed_filters asset libraries - https://www.drupal.org/node/2902742": "https://www.drupal.org/files/issues/add_core_drupal_as-2902742-2.patch"
      },
      "drupal/core": {
        "Contextual links should not be added inside another link - https://www.drupal.org/node/2898875": "https://www.drupal.org/files/issues/contextual_links_should-2898875-3.patch",
        "No validation on text length for menu description when editing node - https://www.drupal.org/node/2852665#comment-12157856": "https://www.drupal.org/files/issues/fatal_error_remove_menu_add_with_tests-2852665-12.patch",
        "active-link.js throws JS error if query string parameter contains a single quote - https://www.drupal.org/node/2902769": "https://www.drupal.org/files/issues/active_link_js_throws-2902769-5_0.patch",
        "Duplicate AJAX wrapper around a file field - https://www.drupal.org/node/2346893": "https://www.drupal.org/files/issues/duplicate_ajax_wrapper-2346893-205.patch",
        "getUuid() in class MenuLinkContent not returning any value - https://www.drupal.org/node/2737741": "https://www.drupal.org/files/issues/drupal-menulinkcontent-getuuid-return-missing-2737741-2.patch",
        "RSS view with fields give wrong URL from path field - https://www.drupal.org/node/2673980#comment-12180229": "https://www.drupal.org/files/issues/rss_view_with_fields-2673980-20.patch",
        "Close button in tour module lacks descriptive text - https://www.drupal.org/node/2885583#comment-12125485": "https://www.drupal.org/files/issues/close_button_in_tour-2885583-2.patch",
        "Fatal error: Call to a member function getTimestamp() - https://www.drupal.org/node/2573807#comment-12225765": "PATCHES/2573807-40-8.3.x.lightning.patch",
        "Object styles for some elements (a-tags, lists, ...) not showing - https://www.drupal.org/node/2911749": "https://www.drupal.org/files/issues/2911749-37.patch",
        "The file_prepare_directory() function fails to detect write permissions for stream wrappers when using NFS.": "PATCHES/944582-124-lightning.patch"
      },
      "drupal/entity_reference_revisions": {
        "Allow entities to be generated if none exist - https://www.drupal.org/node/2910326": "https://www.drupal.org/files/issues/entity_reference_revisions-stop_checking_for_entities_before_generating_sample-2910326-2.patch"
      },
      "drupal/extlink": {
        "Remove minified js file - https://www.drupal.org/node/2929552": "PATCHES/2929552-5.patch"
      },
      "drupal/fast_404": {
        "Incompatibility with Redirect module - https://www.drupal.org/node/2838359": "https://www.drupal.org/files/issues/fast_404-redirect-2838359-8.patch",
        "Incompatibility with Pathauto Module - https://www.drupal.org/node/2743965": "https://www.drupal.org/files/issues/fast_404-aliases-2743965-3.patch",
        "Subscribe to NotFoundHttpException event - https://www.drupal.org/node/2930381": "https://www.drupal.org/files/issues/fast_404-subscribe_notfound_exception-2930381-4.patch"
      },
      "drupal/maxlength": {
        "Maxlength only for summary field - https://www.drupal.org/project/maxlength/issues/2798903": "https://www.drupal.org/files/issues/maxlength-limit_only_summary-2798903-2.patch"
      },
      "drupal/token": {
        "Node preview button generates useless menu link - https://www.drupal.org/node/2823731#comment-11905884": "https://www.drupal.org/files/issues/token_node_preview_menu_link-2823731-4.patch",
        "Summary token not fully handled in fields": "https://www.drupal.org/files/issues/tokens.body-with-summary.patch"
      },
      "drupal/social_media": {
        "Dynamic Page Cache invalidated when URL query string changes": "https://www.drupal.org/files/issues/social_media-dynamic-page-cache-invalidated-url-query-2931644-1.patch"
      },
      "drupal/events_log_track": {
        "Events Log Track breaks Entity Browser - https://www.drupal.org/project/events_log_track/issues/2934036": "https://www.drupal.org/files/issues/2934036-check_empty_submit-1.patch",
        "Entities with title longer than 50 characters - https://www.drupal.org/project/events_log_track/issues/2930817": "https://www.drupal.org/files/issues/increase-character-length-2930817-2.patch"
      }
    }
  }
}
